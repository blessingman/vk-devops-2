# --- Настройки образа ---
image:
  # Используем официальный репозиторий ClickHouse
  repository: clickhouse/clickhouse-server
  # Тег образа (версия ClickHouse). 
  # Требование 2: Возможность указать желаемую версию.
  tag: "23.8"
  # Политика скачивания: IfNotPresent экономит трафик и время при перезапусках
  pullPolicy: IfNotPresent

# --- Настройки пользователей БД ---
# Требование 3: Список пользователей с паролями для доступа к БД.
# Передаем массив объектов, по которому пройдемся циклом в ConfigMap.
dbUsers:
  # Пример администратора
  - username: "admin_user"
    password: "superSecretPassword123" # В продакшене лучше использовать Secret, здесь plain-text для учебных целей
    networks:
      ip: "::/0" # Разрешаем доступ с любых IP адресов (IPv6/IPv4)
  
  # Пример пользователя только для чтения (логику прав нужно настраивать в profiles, здесь базовый пример)
  - username: "analytics_viewer"
    password: "viewerPassword"
    networks:
      ip: "::/0"

# --- Настройки сервиса ---
service:
  type: ClusterIP # Внутренний доступ внутри кластера
  httpPort: 8123  # Порт для HTTP запросов
  tcpPort: 9000   # Порт для нативного клиента (clickhouse-client)

# --- Настройки хранилища ---
persistence:
  # Для тестового задания отключаем PVC, чтобы не требовать StorageClass.
  # Данные будут храниться во временной папке пода (пропадут при рестарте).
  enabled: false 
  size: 10Gi